<!-- Fall Promo Announcement Banner -->
<div id="fall-promo-banner" class="announcement-banner fixed left-0 right-0 z-40 hidden">
    <div class="banner-content relative overflow-hidden">
        <!-- Fall gradient background -->
        <div class="absolute inset-0 bg-gradient-to-r from-[#D97742] via-[#E8985E] to-[#F5A962]"></div>

        <!-- Subtle pattern overlay -->
        <div class="absolute inset-0 opacity-10" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,.1) 10px, rgba(255,255,255,.1) 20px);"></div>

        <!-- Desktop Content (static) -->
        <div class="desktop-content hidden sm:flex relative items-center justify-between gap-3 md:gap-4 px-4 max-w-7xl mx-auto h-[50px]">
            <!-- Promotional Text -->
            <div class="flex-1 flex items-center justify-center text-white">
                <p class="text-sm md:text-base font-semibold whitespace-nowrap leading-none">
                    <span class="font-bold">FALL PROMO</span>
                    <span class="mx-2">•</span>
                    <span class="font-bold">$75 Natural Set</span>
                    <span class="mx-2">•</span>
                    <span class="hidden lg:inline">New & Returning Customers</span>
                    <span class="lg:hidden">New & Returning</span>
                    <span class="mx-2">•</span>
                    <span class="text-yellow-100 font-semibold">Santa Ana Location</span>
                </p>
            </div>

            <!-- CTA Button -->
            <a
                href="https://book.squareup.com/appointments/f80ffd17-8030-41a2-ba19-12bd5541cb16/location/LZMX8CTA69S7E/services"
                target="_blank"
                rel="noopener noreferrer"
                class="cta-button inline-flex items-center gap-1 px-3 md:px-4 py-1 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/50 rounded-md text-white text-sm font-bold transition-all duration-300 hover:scale-105 whitespace-nowrap shadow-md leading-none"
            >
                <span>Book Now</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </a>

            <!-- Close Button -->
            <button
                id="close-banner-desktop"
                class="close-button flex-shrink-0 hover:bg-white/20 rounded-sm transition-colors duration-200 leading-none"
                aria-label="Close announcement banner"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Mobile Content (ticker/marquee) -->
        <div class="mobile-content sm:hidden relative flex items-center h-[50px] px-2">
            <!-- Scrolling ticker content -->
            <div class="ticker-wrapper flex-1 overflow-hidden">
                <div class="ticker-content inline-flex gap-8 text-white font-semibold text-sm whitespace-nowrap">
                    <!-- Repeat content for seamless loop -->
                    <span class="ticker-item">🍂 🎃 FALL PROMO 🎃 • $75 Natural Set • New & Returning • Santa Ana • Book Now! 🍂</span>
                    <span class="ticker-item">🍂 🎃 FALL PROMO 🎃 • $75 Natural Set • New & Returning • Santa Ana • Book Now! 🍂</span>
                    <span class="ticker-item">🍂 🎃 FALL PROMO 🎃 • $75 Natural Set • New & Returning • Santa Ana • Book Now! 🍂</span>
                </div>
            </div>

            <!-- Mobile Close Button -->
            <button
                id="close-banner-mobile"
                class="close-button flex-shrink-0 p-1.5 hover:bg-white/20 rounded-sm transition-colors duration-200 ml-2"
                aria-label="Close announcement banner"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>
</div>

<style>
.announcement-banner {
    top: 80px; /* Below the navigation bar (nav is h-20 = 80px) */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.announcement-banner.banner-visible {
    animation: slideDown 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.announcement-banner.banner-hiding {
    animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.6, 1) forwards;
}

@keyframes slideDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(0);
        opacity: 1;
    }
    to {
        transform: translateY(-100%);
        opacity: 0;
    }
}

/* Industry standard height: 50px */
.banner-content {
    height: 50px;
}

/* Ticker animation for mobile */
.ticker-wrapper {
    position: relative;
}

.ticker-content {
    animation: scroll 30s linear infinite;
    will-change: transform;
}

/* Pause animation on hover/tap */
.ticker-wrapper:hover .ticker-content,
.ticker-wrapper:active .ticker-content {
    animation-play-state: paused;
}

@keyframes scroll {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-33.333%);
    }
}

/* Hover effects */
.cta-button:hover {
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
}

.close-button:hover {
    transform: rotate(90deg);
}

.close-button {
    transition: all 0.3s ease;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('fall-promo-banner');
    const closeButtonDesktop = document.getElementById('close-banner-desktop');
    const closeButtonMobile = document.getElementById('close-banner-mobile');
    const STORAGE_KEY = 'fallPromo2024Dismissed';

    // Check if banner was previously dismissed
    const wasDismissed = localStorage.getItem(STORAGE_KEY);

    if (!wasDismissed && banner) {
        // Show banner with animation
        banner.classList.remove('hidden');
        setTimeout(() => {
            banner.classList.add('banner-visible');
        }, 100);
    }

    // Handle close buttons (both mobile and desktop)
    function closeBanner() {
        if (banner) {
            // Animate out
            banner.classList.remove('banner-visible');
            banner.classList.add('banner-hiding');

            // Save dismissal to localStorage
            localStorage.setItem(STORAGE_KEY, 'true');

            // Remove from DOM after animation
            setTimeout(() => {
                banner.remove();
            }, 300);
        }
    }

    closeButtonDesktop?.addEventListener('click', closeBanner);
    closeButtonMobile?.addEventListener('click', closeBanner);

    // Make ticker tappable on mobile to navigate to booking
    const tickerWrapper = document.querySelector('.ticker-wrapper');
    tickerWrapper?.addEventListener('click', function() {
        if (window.innerWidth < 640) { // Only on mobile
            window.open('https://book.squareup.com/appointments/f80ffd17-8030-41a2-ba19-12bd5541cb16/location/LZMX8CTA69S7E/services', '_blank');
        }
    });
});
</script>
