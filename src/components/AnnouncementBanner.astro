<!-- Fall Promo Announcement Banner -->
<div id="fall-promo-banner" class="announcement-banner fixed left-0 right-0 z-40 hidden">
    <div class="banner-content relative overflow-hidden">
        <!-- Fall gradient background -->
        <div class="absolute inset-0 bg-gradient-to-r from-[#D97742] via-[#E8985E] to-[#F5A962]"></div>

        <!-- Subtle pattern overlay -->
        <div class="absolute inset-0 opacity-10" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,.1) 10px, rgba(255,255,255,.1) 20px);"></div>

        <!-- Content -->
        <div class="relative flex items-center justify-between gap-2 sm:gap-3 md:gap-4 px-2 sm:px-4 py-2 sm:py-2.5 max-w-7xl mx-auto">
            <!-- Promotional Text -->
            <div class="flex-1 flex items-center justify-center gap-1.5 sm:gap-2 md:gap-3 text-white">
                <span class="text-base sm:text-lg md:text-xl hidden xs:inline" aria-hidden="true">🍂</span>
                <p class="text-[10px] xs:text-xs sm:text-sm md:text-base font-semibold whitespace-nowrap leading-none">
                    <span class="hidden xs:inline">🎃 FALL PROMO 🎃</span>
                    <span class="xs:hidden">🎃 FALL</span>
                    <span class="mx-1 sm:mx-1.5 md:mx-2">•</span>
                    <span class="font-bold">$75 Natural Set</span>
                    <span class="mx-1 sm:mx-1.5 md:mx-2">•</span>
                    <span class="hidden lg:inline">New & Returning Customers</span>
                    <span class="hidden sm:inline lg:hidden">New & Returning</span>
                    <span class="sm:hidden">New/Return</span>
                    <span class="mx-1 sm:mx-1.5 md:mx-2">•</span>
                    <span class="text-yellow-100">Santa Ana</span>
                </p>
                <span class="text-base sm:text-lg md:text-xl hidden xs:inline" aria-hidden="true">🍂</span>
            </div>

            <!-- CTA Button -->
            <a
                href="https://book.squareup.com/appointments/f80ffd17-8030-41a2-ba19-12bd5541cb16/location/LZMX8CTA69S7E/services"
                target="_blank"
                rel="noopener noreferrer"
                class="cta-button hidden sm:inline-flex items-center gap-1 px-2.5 sm:px-3 py-1 sm:py-1.5 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/40 rounded-full text-white text-[10px] sm:text-xs font-bold transition-all duration-300 hover:scale-105 whitespace-nowrap shadow-lg leading-none"
            >
                <span>Book Now</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 sm:h-3.5 sm:w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </a>

            <!-- Close Button -->
            <button
                id="close-banner"
                class="close-button flex-shrink-0 p-0.5 sm:p-1 hover:bg-white/20 rounded-full transition-colors duration-200"
                aria-label="Close announcement banner"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 sm:h-4 sm:w-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
    </div>
</div>

<style>
.announcement-banner {
    top: 80px; /* Below the navigation bar (nav is h-20 = 80px) */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.announcement-banner.banner-visible {
    animation: slideDown 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.announcement-banner.banner-hiding {
    animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.6, 1) forwards;
}

@keyframes slideDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        transform: translateY(0);
        opacity: 1;
    }
    to {
        transform: translateY(-100%);
        opacity: 0;
    }
}

.banner-content {
    min-height: 32px;
}

@media (min-width: 640px) {
    .banner-content {
        min-height: 36px;
    }
}

/* Hover effects */
.cta-button:hover {
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
}

.close-button:hover {
    transform: rotate(90deg);
}

.close-button {
    transition: all 0.3s ease;
}

/* Mobile adjustments */
@media (max-width: 640px) {
    .announcement-banner {
        top: 80px;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('fall-promo-banner');
    const closeButton = document.getElementById('close-banner');
    const STORAGE_KEY = 'fallPromo2024Dismissed';

    // Check if banner was previously dismissed
    const wasDismissed = localStorage.getItem(STORAGE_KEY);

    if (!wasDismissed && banner) {
        // Show banner with animation
        banner.classList.remove('hidden');
        setTimeout(() => {
            banner.classList.add('banner-visible');
        }, 100);
    }

    // Handle close button
    closeButton?.addEventListener('click', function() {
        if (banner) {
            // Animate out
            banner.classList.remove('banner-visible');
            banner.classList.add('banner-hiding');

            // Save dismissal to localStorage
            localStorage.setItem(STORAGE_KEY, 'true');

            // Remove from DOM after animation
            setTimeout(() => {
                banner.remove();
            }, 300);
        }
    });
});
</script>
