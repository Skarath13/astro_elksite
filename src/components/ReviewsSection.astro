---
import { Image } from 'astro:assets';

const reviews = {
  irvine: [
    {
      name: "Patricia H.",
      location: "Irvine, CA",
      date: "4/02/2025",
      initials: "PH",
      text: "Absolutely in love with this place! Been coming to the Irvine location for over a year and the quality never disappoints. My hybrid set retention is incredible - easily 3+ weeks between fills. The technician is so professional and skilled. Worth every penny!"
    },
    {
      name: "Sarah M.",
      location: "Irvine, CA",
      date: "3/15/2025",
      initials: "SM",
      text: "Best lash extensions in Orange County! The technician was incredibly skilled and gentle. My lashes look stunning and last so long. The studio is clean and comfortable. I'm obsessed!"
    },
    {
      name: "Jennifer L.",
      location: "Irvine, CA",
      date: "2/28/2025",
      initials: "JL",
      text: "Perfect every single time! I've been a loyal client for 2 years and have never been disappointed. The staff is amazing, the studio is beautiful, and the results are consistently flawless. Highly recommend!"
    },
    {
      name: "Amanda K.",
      location: "Irvine, CA",
      date: "4/18/2025",
      initials: "AK",
      text: "Absolutely obsessed with my lashes! The technician listened to exactly what I wanted and delivered beyond my expectations. The studio atmosphere is so calming and luxurious. I get compliments everywhere I go!"
    },
    {
      name: "Rebecca S.",
      location: "Irvine, CA",
      date: "4/25/2025",
      initials: "RS",
      text: "After trying multiple lash salons in OC, I finally found my forever place! The quality and retention are unmatched. The staff is incredibly knowledgeable and makes you feel so comfortable. Can't recommend enough!"
    },
    {
      name: "Christina P.",
      location: "Irvine, CA",
      date: "5/03/2025",
      initials: "CP",
      text: "I've been getting lash extensions for years and this is hands down the best work I've experienced. The attention to detail is incredible and my lashes look naturally full and beautiful. Worth the drive from Laguna!"
    },
    {
      name: "Danielle M.",
      location: "Irvine, CA",
      date: "5/10/2025",
      initials: "DM",
      text: "Five stars isn't enough! The technician is an absolute artist. My hybrid set looks flawless and the retention is amazing. The salon is spotless and the vibe is so relaxing. This is my happy place!"
    },
    {
      name: "Vanessa R.",
      location: "Irvine, CA",
      date: "5/17/2025",
      initials: "VR",
      text: "Best lash investment ever! I wake up looking put together every day. The quality is superior and the prices are incredibly reasonable for the level of service. I bring all my friends here now!"
    },
    {
      name: "Olivia T.",
      location: "Irvine, CA",
      date: "5/24/2025",
      initials: "OT",
      text: "Exceptional service from start to finish! The technician took time to explain everything and customize my look perfectly. My volume lashes are full, fluffy, and gorgeous. I'm officially addicted!"
    }
  ],
  tustin: [
    {
      name: "Maria R.",
      location: "Tustin, CA",
      date: "4/10/2025",
      initials: "MR",
      text: "Absolutely love this place! The Tustin location is so convenient and the technicians are true artists. My volume lashes look so natural yet dramatic. Customer service is excellent too!"
    },
    {
      name: "Ashley K.",
      location: "Tustin, CA",
      date: "3/22/2025",
      initials: "AK",
      text: "Best lash salon in Orange County! The quality is unmatched and the prices are very reasonable. I drive from Newport just to come here because nowhere else compares."
    },
    {
      name: "Diana F.",
      location: "Tustin, CA",
      date: "3/05/2025",
      initials: "DF",
      text: "Five stars! The attention to detail is incredible. My hybrid set looks absolutely perfect and the retention is amazing. The studio is beautiful and so relaxing. Worth every penny!"
    },
    {
      name: "Lauren B.",
      location: "Tustin, CA",
      date: "4/20/2025",
      initials: "LB",
      text: "I'm in love with my lashes! The technician was so patient and made sure everything was perfect. The results are stunning and natural-looking. Best lash experience I've ever had!"
    },
    {
      name: "Emily H.",
      location: "Tustin, CA",
      date: "4/28/2025",
      initials: "EH",
      text: "Wow! Just wow! My mega volume set is everything I dreamed of and more. The technician is incredibly skilled and the studio vibe is so peaceful. I actually fell asleep during my appointment!"
    },
    {
      name: "Brittany L.",
      location: "Tustin, CA",
      date: "5/05/2025",
      initials: "BL",
      text: "This place is a hidden gem! The quality is outstanding and the prices can't be beat. My classic lashes look so natural that people think I was born with them. Highly recommend!"
    },
    {
      name: "Stephanie W.",
      location: "Tustin, CA",
      date: "5/12/2025",
      initials: "SW",
      text: "Game changer! I've been coming here for months and every time is perfection. The retention is incredible - I go 4+ weeks between fills. The staff is friendly and professional. Love this place!"
    },
    {
      name: "Natalie J.",
      location: "Tustin, CA",
      date: "5/19/2025",
      initials: "NJ",
      text: "Best decision ever! My hybrid lashes are absolutely gorgeous. The technician really knows their craft and takes pride in their work. The salon is clean, modern, and has such a great atmosphere!"
    },
    {
      name: "Michelle D.",
      location: "Tustin, CA",
      date: "5/26/2025",
      initials: "MD",
      text: "I'm obsessed! The lash quality is superior and the application is flawless. My lashes stay perfect for weeks. The customer service is top-notch and the pricing is so reasonable. 10/10!"
    }
  ],
  santaana: [
    {
      name: "Isabella C.",
      location: "Santa Ana, CA",
      date: "4/08/2025",
      initials: "IC",
      text: "Amazing work! I've been getting lashes for years and this is by far the best quality I've experienced. The Santa Ana location is gorgeous and the staff is so welcoming. My classic set is perfect!"
    },
    {
      name: "Sophia G.",
      location: "Santa Ana, CA",
      date: "3/20/2025",
      initials: "SG",
      text: "Incredible service and beautiful results! The technician took her time to make sure every lash was perfect. The retention is fantastic - going on 4 weeks and they still look amazing!"
    },
    {
      name: "Carmen V.",
      location: "Santa Ana, CA",
      date: "3/02/2025",
      initials: "CV",
      text: "Best lash experience ever! The quality is outstanding and the prices are so reasonable. I love how natural yet full my volume set looks. Will never go anywhere else!"
    },
    {
      name: "Jessica N.",
      location: "Santa Ana, CA",
      date: "4/22/2025",
      initials: "JN",
      text: "Perfect lashes every single time! The technician is so talented and really listens to what you want. The salon is beautiful and spotless. I get so many compliments on my lashes!"
    },
    {
      name: "Taylor A.",
      location: "Santa Ana, CA",
      date: "4/30/2025",
      initials: "TA",
      text: "Absolutely amazing! I've tried so many lash places and this is by far the best. The quality is incredible and the retention is outstanding. The staff makes you feel like family!"
    },
    {
      name: "Kimberly F.",
      location: "Santa Ana, CA",
      date: "5/07/2025",
      initials: "KF",
      text: "I'm in love! My hybrid lashes are exactly what I wanted - full but still natural. The technician is a true artist and the atmosphere is so relaxing. Best lash salon in OC!"
    },
    {
      name: "Gabriella M.",
      location: "Santa Ana, CA",
      date: "5/14/2025",
      initials: "GM",
      text: "Hands down the best! The quality and service are exceptional. My volume lashes look amazing and last so long. The pricing is fair and the results are worth every penny. Highly recommend!"
    },
    {
      name: "Victoria S.",
      location: "Santa Ana, CA",
      date: "5/21/2025",
      initials: "VS",
      text: "Phenomenal experience! The technician was professional, friendly, and so skilled. My lashes are flawless and the retention is incredible. The salon ambiance is beautiful. Love everything about this place!"
    },
    {
      name: "Angela R.",
      location: "Santa Ana, CA",
      date: "5/28/2025",
      initials: "AR",
      text: "Best lashes of my life! The attention to detail is unmatched. My classic set looks so natural and beautiful. The staff is wonderful and the salon is gorgeous. I'm a client for life!"
    }
  ],
  costamesa: [
    {
      name: "Rachel T.",
      location: "Costa Mesa, CA",
      date: "4/12/2025",
      initials: "RT",
      text: "Exceptional quality and service! The Costa Mesa location is beautiful and the technicians are so skilled. My mega volume set is exactly what I wanted - full, fluffy, and gorgeous!"
    },
    {
      name: "Melissa W.",
      location: "Costa Mesa, CA",
      date: "3/25/2025",
      initials: "MW",
      text: "Love love love! Been coming here for 6 months and always leave feeling beautiful. The hybrid lashes are perfect for my lifestyle - natural but still glamorous. Highly recommend!"
    },
    {
      name: "Nicole B.",
      location: "Costa Mesa, CA",
      date: "3/08/2025",
      initials: "NB",
      text: "Outstanding work! The attention to detail is incredible and the results speak for themselves. My classic set looks so natural that people think they're my real lashes. Amazing!"
    },
    {
      name: "Heather C.",
      location: "Costa Mesa, CA",
      date: "4/24/2025",
      initials: "HC",
      text: "Absolutely stunning results! The technician is incredibly talented and makes you feel so comfortable. My volume lashes are full and beautiful. The salon is clean and the vibe is perfect!"
    },
    {
      name: "Madison K.",
      location: "Costa Mesa, CA",
      date: "5/01/2025",
      initials: "MK",
      text: "Best lash salon ever! I've been to many places and nothing compares to the quality here. The retention is amazing and my lashes always look perfect. The staff is so sweet and professional!"
    },
    {
      name: "Courtney L.",
      location: "Costa Mesa, CA",
      date: "5/09/2025",
      initials: "CL",
      text: "I'm obsessed with my lashes! The technician really took the time to understand what I wanted and delivered perfectly. The salon atmosphere is so calming. Best investment in myself!"
    },
    {
      name: "Alexis P.",
      location: "Costa Mesa, CA",
      date: "5/16/2025",
      initials: "AP",
      text: "Five stars all the way! The quality is exceptional and the service is always amazing. My hybrid lashes look naturally beautiful. The retention is incredible - they last so long!"
    },
    {
      name: "Samantha G.",
      location: "Costa Mesa, CA",
      date: "5/23/2025",
      initials: "SG",
      text: "Phenomenal! I drive from Huntington Beach just to come here because it's worth it. The technician is an artist and the results are always flawless. My lashes have never looked better!"
    },
    {
      name: "Hannah V.",
      location: "Costa Mesa, CA",
      date: "5/30/2025",
      initials: "HV",
      text: "Perfect every time! The attention to detail is incredible and my lashes always turn out beautifully. The salon is gorgeous and the staff is wonderful. I wouldn't trust anyone else with my lashes!"
    }
  ]
};
---

<section id="reviews" class="bg-gradient-ghibli pb-20 md:pb-28 relative overflow-hidden">
    <!-- Decorative Elements -->
    <div class="decorative-blob" style="width: 400px; height: 400px; top: -10%; left: -15%; opacity: 0.15; background: radial-gradient(circle, #E57F9F 0%, #F4ADB8 70%, transparent 100%);"></div>
    <div class="decorative-blob" style="width: 300px; height: 300px; bottom: 5%; right: -10%; opacity: 0.1; background: radial-gradient(circle, #FFCBB6 0%, #F4ADB8 80%, transparent 100%);"></div>
    <div class="decorative-sparkle" style="top: 20%; right: 15%;"></div>
    <div class="decorative-sparkle" style="bottom: 30%; left: 20%; animation-delay: 0.5s;"></div>
    <div class="decorative-sparkle" style="top: 40%; left: 50%; animation-delay: 1s;"></div>

    <div class="container mx-auto px-4 relative z-10">
        <!-- Section Header -->
        <div class="text-center mb-12">
            <h2 class="text-4xl md:text-5xl font-bold font-playfair text-darktext mb-4 relative inline-block">
                Client Love Stories
                <div class="absolute -bottom-2 left-0 w-full h-1 bg-gradient-to-r from-primary via-secondary to-peach opacity-70"></div>
            </h2>
            <div class="flex items-center justify-center gap-4 mb-4">
                <div class="flex items-center">
                    <Image
                        src="/images/yelp.png"
                        alt="5-star Yelp reviews Orange County lash extensions - Top rated lash salon OC"
                        width={80}
                        height={24}
                        class="h-6 w-auto object-contain animate-pulse mr-3"
                        loading="lazy"
                    />
                    <div class="flex">
                        {[...Array(5)].map(() => (
                            <svg class="h-6 w-6 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                        ))}
                    </div>
                    <div class="flex items-center ml-3">
                        <span class="text-2xl font-semibold text-darktext">5.0</span>
                        <span class="text-sm text-mediumtext ml-2">based on <span class="font-semibold">1,000+</span> reviews</span>
                    </div>
                </div>
            </div>
            <p class="text-lg text-mediumtext max-w-2xl mx-auto mb-4">Discover the magic in our clients' experiences across Orange County!</p>
            <button id="open-yelp-modal" class="inline-flex items-center gap-2 text-primary hover:text-secondary transition duration-300 group">
                <span class="text-base">Read All Reviews on Yelp</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </button>
        </div>

        <!-- Yelp Reviews Modal -->
        <div id="yelp-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
            <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4 relative transform transition-all">
                <button id="close-yelp-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-darktext mb-2">Choose Location</h3>
                    <p class="text-mediumtext">Select a location to read their Yelp reviews</p>
                </div>
                <div class="space-y-4">
                    <a href="https://www.yelp.com/biz/elegant-lashes-by-katie-irvine-irvine" target="_blank" rel="noopener noreferrer" class="block w-full py-3 px-4 bg-white hover:bg-gray-50 border border-primary rounded-lg text-center text-primary hover:text-secondary transition duration-300 group">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Irvine Reviews</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </div>
                    </a>
                    <a href="https://www.yelp.com/biz/elegant-lashes-by-katie-tustin-4" target="_blank" rel="noopener noreferrer" class="block w-full py-3 px-4 bg-white hover:bg-gray-50 border border-primary rounded-lg text-center text-primary hover:text-secondary transition duration-300 group">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Tustin Reviews</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </div>
                    </a>
                    <a href="https://www.yelp.com/biz/elegant-lashes-by-katie-santa-ana-11" target="_blank" rel="noopener noreferrer" class="block w-full py-3 px-4 bg-white hover:bg-gray-50 border border-primary rounded-lg text-center text-primary hover:text-secondary transition duration-300 group">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Santa Ana Reviews</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </div>
                    </a>
                    <a href="https://www.yelp.com/biz/elegant-lashes-by-katie-costa-mesa-3" target="_blank" rel="noopener noreferrer" class="block w-full py-3 px-4 bg-white hover:bg-gray-50 border border-primary rounded-lg text-center text-primary hover:text-secondary transition duration-300 group">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">Costa Mesa Reviews</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                            </svg>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- Location Tabs -->
        <div class="grid grid-cols-2 md:flex md:flex-nowrap justify-center gap-4 mb-8">
            <button class="location-tab active px-6 py-2 rounded-full bg-white/80 backdrop-blur-sm shadow-md hover:shadow-lg transition duration-300 text-primary hover:text-secondary font-medium text-center whitespace-nowrap" data-location="irvine">Irvine</button>
            <button class="location-tab px-6 py-2 rounded-full bg-white/80 backdrop-blur-sm shadow-md hover:shadow-lg transition duration-300 text-primary hover:text-secondary font-medium text-center whitespace-nowrap" data-location="tustin">Tustin</button>
            <button class="location-tab px-6 py-2 rounded-full bg-white/80 backdrop-blur-sm shadow-md hover:shadow-lg transition duration-300 text-primary hover:text-secondary font-medium text-center whitespace-nowrap" data-location="santaana">Santa Ana</button>
            <button class="location-tab px-6 py-2 rounded-full bg-white/80 backdrop-blur-sm shadow-md hover:shadow-lg transition duration-300 text-primary hover:text-secondary font-medium text-center whitespace-nowrap" data-location="costamesa">Costa Mesa</button>
        </div>

        <!-- Reviews Container -->
        <div class="reviews-container relative">
            {Object.entries(reviews).map(([location, locationReviews]) => (
                <div class={`location-reviews ${location === 'irvine' ? 'active' : 'hidden'}`} data-location={location}>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {locationReviews.map((review) => (
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 transform hover:-translate-y-2">
                                <div class="flex items-start mb-4">
                                    <div class="w-12 h-12 bg-gradient-to-br from-skyblue to-primary rounded-full flex items-center justify-center text-white font-bold text-sm">
                                        {review.initials}
                                    </div>
                                    <div class="ml-4 flex-1">
                                        <h4 class="font-bold text-darktext">{review.name}</h4>
                                        <p class="text-sm text-mediumtext">{review.location}</p>
                                        <div class="flex mt-1">
                                            {[...Array(5)].map(() => (
                                                <svg class="h-4 w-4 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            ))}
                                        </div>
                                    </div>
                                    <span class="text-sm text-mediumtext">{review.date}</span>
                                </div>
                                <div class="relative">
                                    <div class="absolute -top-2 -left-2 w-8 h-8 bg-peach/10 rounded-full"></div>
                                    <p class="text-darktext leading-relaxed">{review.text}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Tab switching functionality
    const tabs = document.querySelectorAll('.location-tab');
    const reviewContainers = document.querySelectorAll('.location-reviews');

    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        const targetLocation = this.getAttribute('data-location');

        // Update active tab
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');

        // Update active review container
        reviewContainers.forEach(container => {
          container.classList.add('hidden');
          container.classList.remove('active');
        });

        const targetContainer = document.querySelector(`.location-reviews[data-location="${targetLocation}"]`);
        if (targetContainer) {
          targetContainer.classList.remove('hidden');
          targetContainer.classList.add('active');
        }
      });
    });

    // Modal functionality
    const openModalBtn = document.getElementById('open-yelp-modal');
    const closeModalBtn = document.getElementById('close-yelp-modal');
    const modal = document.getElementById('yelp-modal');

    openModalBtn?.addEventListener('click', function() {
      modal?.classList.remove('hidden');
      modal?.classList.add('flex');
    });

    closeModalBtn?.addEventListener('click', function() {
      modal?.classList.add('hidden');
      modal?.classList.remove('flex');
    });

    // Close modal when clicking outside
    modal?.addEventListener('click', function(e) {
      if (e.target === modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    });
  });
</script>

<style>
  .location-tab.active {
    @apply bg-primary text-white;
  }

  .decorative-sparkle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, #FFF 0%, transparent 70%);
    border-radius: 50%;
    animation: sparkle 2s ease-in-out infinite;
  }

  @keyframes sparkle {
    0%, 100% { opacity: 0; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
  }
</style>